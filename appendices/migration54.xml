<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- Based on UPGRADING version 322438. Work in progess !-->

<appendix xml:id="migration54" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Migrating from PHP 5.3.x to PHP 5.4.x</title>
 <simpara>
  &manual.migration.seealso;
  <link linkend="migration5">5.0.x</link>,
  <link linkend="migration51">5.1.x</link>,
  <link linkend="migration52">5.2.x</link> and
  <link linkend="migration53">5.3.x</link>.
 </simpara>

 <section xml:id="migration54.changes">
  <title>What has changed in PHP 5.4.x</title>
  <simpara>
  <!-- Placehold for "What has changed in PHP 5.4.x". -->

  <!-- Current content for the 5.3.x changes
  
   Most improvements in PHP 5.3.x have no impact on existing code.  There are
   a <link linkend="migration53.incompatible">few incompatibilities</link>
   and <link linkend="migration53.new-features">new features</link> that should 
   be considered, and code should be tested before switching PHP
   versions in production environments.
   
   -->
  </simpara>
  <warning>
   <simpara>
    This list is incomplete and is undergoing constant changes until PHP 5.4 is 
    is about to be released.
   </simpara>
  </warning>
  <simpara>
   For systems being upgraded from an older version of PHP, the relevant
   documentation is available at:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="migration53">Upgrade Notes for PHP 5.3.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration52">Upgrade Notes for PHP 5.2.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration51">Upgrade Notes for PHP 5.1.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration5">Migrating from PHP 4 to PHP 5</link>.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.incompatible">
  <title>Backward Incompatible Changes</title>
  <simpara>
   Although most existing PHP 5 code should work without changes, please take
   note of some backward incompatible changes:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     The <link linkend="control-structures.break"><literal>break</literal></link>
     and <link linkend="control-structures.continue"><literal>continue</literal></link>
     keywords don't accept variable argument anymore. Consider using
     a static constant argument.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="features.safe-mode"><literal>Safe mode</literal></link> is no
     longer supported. Any application that rely on safe mode may need
     adjustements in term of security.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     The <function>import_request_variables()</function>, 
     <function>session_register()</function>, <function>session_unregister()</function>, 
     <function>session_is_registered()</function> functions have been removed.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>get_magic_quotes_gpc()</function> and <function>get_magic_quotes_runtime()</function>
     now always return false. <function>set_magic_quotes_runtime()</function> raises an
     <constant>E_CORE_ERROR</constant>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   The following keyword(s) are now reserved and may not be used in function,
   class, etc. names.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="language.oop5.traits">trait</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     callable
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     insteadof
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.new-features">
  <title>New features</title>
  <simpara>
   PHP 5.4.0 offers a wide range of new features:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Support for <link linkend="language.oop5.traits">traits</link> has been 
     added.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.windows">
  <title>Changes made to Windows support</title>
  <simpara>
   Changes to the Windows releases:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "Changes made to Windows support" -->
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Windows support has been added for the following functions:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "Changes made to Windows support" -->
     
     <!-- Example for a previous versions entry for this list

     <function>checkdnsrr</function>
     
     -->
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Other changes:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "Other changes:" -->
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.sapi">
  <title>Changes in SAPI modules</title>
  <itemizedlist>
   <listitem>
    <simpara>
     A new SAPI module named cli-server is now available.
    </simpara>
   </listitem>
  </itemizedlist>
  <itemizedlist>
   <listitem>
    <simpara>
     Added CLI option --rz which shows information of the named Zend extension.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Added shortcut #inisetting=value to change ini settings at run-time in interactive readline CLI
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Added apache compatible functions: <function>apache_child_terminate()</function>,
     <function>getallheaders()</function>, <function>apache_request_headers()</function>
     and <function>apache_response_headers()</function> for FastCGI SAPI.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     PHP-FPM : Added process.max setting to control the number of process FPM can fork
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.deprecated">
  <title>Deprecated features in PHP 5.4.x</title>
  <simpara>
   <!-- Placeholder for "Deprecated features in PHP 5.4.x" -->
  </simpara>
  <simpara>
   The following is a list of deprecated INI directives. Use of any of these INI
   directives will cause an <constant>E_DEPRECATED</constant> error to be thrown
   at startup.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for deprecated INI entries. -->
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Deprecated functions:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>mysql_list_dbs()</function>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Deprecated features:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     INI settings <literal>magic_quotes_gpc</literal> <literal>magic_quotes_runtime</literal> and
     <literal>magic_quotes_sybase</literal>.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

<!-- Are there any undeprecated features/settings/etc. in PHP 5.4?

 <section xml:id="migration54.undeprecated">
  <title>Undeprecated features in PHP 5.3.x</title>
  <simpara>
   The <function>is_a</function> function has been undeprecated by popular
   request; it will no longer issue an <constant>E_STRICT</constant> error.
  </simpara>
 </section>
-->

 <section xml:id="migration54.parameters">
  <title>New Parameters</title>
  <simpara>
   Several functions were given new, optional parameters in PHP 5.4:
  </simpara>
  <simpara>PHP Core:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>scandir()</function> now accepts <constant>SCANDIR_SORT_NONE</constant> as a possible sorting_order value.
    </simpara>
   </listitem>
  </itemizedlist>

  <!-- Placeholder for "New Parameters" by books.

  <simpara><link linkend="book.json">json</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>json_encode</function>
     - Added <parameter>options</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>json_decode</function>
     - Added <parameter>depth</parameter>.
    </simpara>
   </listitem>
  </itemizedlist>
  
  -->

  <simpara>
   New method parameters in PHP 5.4.0:
  </simpara>
  <simpara>PHP Core:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "New Parameters" for PHP Core methods. -->
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>OpenSSL:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>openssl_encrypt()</function> and <function>openssl_decrypt()</function>
     - Added no padding option
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.functions">
  <title>New Functions</title>
  <simpara>
   PHP 5.4 introduced some new functions:
  </simpara>
  <simpara>PHP Core:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>hex2bin()</function> - Convert hex to binary
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>http_reponse_code()</function> - Get or Set the HTTP response code
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>header_register_callback()</function> - Call a header function
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><link linkend="book.spl">SPL:</link></simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>class_uses()</function> - Return the traits used by the given class
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara>
   The following functions are now natively implemented, making them available
   on all operating systems which can run PHP:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for natively implemented functions. -->
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.new-stream-wrappers">
  <title>New stream wrappers</title>
  <simpara>
   The following stream wrappers were introduced in 5.4.0:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "New stream wrappers". -->
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.new-stream-filters">
  <title>New stream filters</title>
  <simpara>
   The following stream filters were introduced in 5.4.0:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "New stream filters". -->
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.class-constants">
  <title>New Class Constants</title>
  <simpara>
   Several new class constants were introduced in 5.4.0:
  </simpara>
  <simpara><link linkend="book.pdo">PDO</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>PDO::MYSQL_ATTR_SSL_CA</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PDO::MYSQL_ATTR_SSL_CAPATH</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PDO::MYSQL_ATTR_SSL_CERT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PDO::MYSQL_ATTR_SSL_CIPHER</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PDO::MYSQL_ATTR_SSL_KEY</constant>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.methods">
  <title>New Methods</title>
  <simpara>
   Several new methods were introduced in 5.4.0:
  </simpara>
  <simpara><classname>XSL</classname>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>XsltProcessor::setSecurityPrefs()</function> and 
     <function>XsltProcessor::getSecurityPrefs()</function>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><classname>SPL</classname>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>RegexIterator::getRegex()</function>
     <function>SplObjectStorage::getHash()</function>
     <function>DirectoryIterator::getExtension()</function>
     <function>SplDoublyLinkedList::serialize()</function>
     <function>SplDoublyLinkedList::unserialize()</function>
     <function>SplFileInfo::getExtension()</function>
     <function>SplFileObject::fputcsv()</function>
     <function>SplQueue::serialize()</function>
     <function>SplQueue::unserialize()</function>
     <function>SplStack::serialize()</function>
     <function>SplStack::unserialize()</function>
     <function>SplTempFileObject::fputcsv()</function>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><classname>Reflection</classname>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>ReflectionExtension::isPersistent()</function>
     <function>ReflectionExtension::isTemporary()</function>
     <function>ReflectionClass::isCloneable()</function>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><classname>Closure</classname>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>Closure::bind()</function>
     <function>Closure::bindTo()</function>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><classname>PDO_dblib</classname>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>PDO::newRowset()</function>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.new-extensions">
  <title>New Extensions</title>
  <simpara>
   The following new extensions are added (by default) as of PHP 5.4.0:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "New Extensions". -->
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.removed-extensions">
  <title>Removed Extensions</title>
  <simpara>
   These extensions have been moved to PECL and are no longer part of the PHP
   distribution. The PECL package versions of these extensions will be created
   according to user demand.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.sqlite">sqlite</link>
     - Note that ext/sqlite3 and ext/pdo_sqlite are not affected
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.extensions-other">
  <title>Other changes to extensions</title>
  <simpara>
   The following extensions can no longer be disabled during build
   configuration:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <!-- Placeholder for "Other changes to extensions" - Cannot be disabled during build. -->
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara>
   Changes in extension behaviour, and new features:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.mysqli">mysqli</link>
     - <function>mysqli_result()</function> now implements <link linkend="class.traversable">Traversable</link>
    </simpara>
   </listitem>
  </itemizedlist>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="ref.pdo-mysql">pdo_mysql</link>
     - Removed support for linking with MySQL client libraries older than 4.1
    </simpara>
   </listitem>
  </itemizedlist>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.mysqlnd">mysqlnd</link>
     - Added named pipes support
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.classes">
  <title>New Classes</title>
  <simpara>
   The following classes were introduced in PHP 5.4.0:
  </simpara>
  <simpara><link linkend="book.spl">SPL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>CallbackFilterIterator</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>RecursiveCallbackFilterIterator</classname>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><link linkend="book.reflection">Reflection</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>ReflectionZendExtension</classname>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><link linkend="book.json">Json</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>JsonSerializable</classname> interface
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><link linkend="book.session">Session</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>SessionHandler</classname> interface
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><link linkend="book.snmp">Snmp</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>SNMP</classname>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara><link linkend="book.json">Intl</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>Transliterator</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>Spoofchecker</classname>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.global-constants">
  <title>New Global Constants</title>

  <simpara>PHP Core:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>CURLOPT_MAX_RECV_SPEED_LARGE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CURLOPT_MAX_SEND_SPEED_LARGE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ENT_DISALLOWED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ENT_HTML401</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ENT_HTML5</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ENT_SUBSTITUTE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ENT_XML1</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ENT_XHTML</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IPPROTO_IP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IPPROTO_IPV6</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IPV6_MULTICAST_HOPS</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IPV6_MULTICAST_IF</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IPV6_MULTICAST_LOOP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IP_MULTICAST_IF</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IP_MULTICAST_LOOP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IP_MULTICAST_TTL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_BIGINT_AS_STRING</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_OBJECT_AS_ARRAY</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_PRETTY_PRINT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_UNESCAPED_SLASHES</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_UNESCAPED_UNICODE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>LIBXML_HTML_NODEFDTD</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>LIBXML_HTML_NOIMPLIED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>LIBXML_PEDANTIC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>MCAST_JOIN_GROUP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>MCAST_LEAVE_GROUP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>MCAST_BLOCK_SOURCE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>MCAST_UNBLOCK_SOURCE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>MCAST_JOIN_SOURCE_GROUP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>MCAST_LEAVE_SOURCE_GROUP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>OPENSSL_CIPHER_AES_128_CBC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>OPENSSL_CIPHER_AES_192_CBC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>OPENSSL_CIPHER_AES_256_CBC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>OPENSSL_RAW_DATA</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>OPENSSL_ZERO_PADDING</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_CLEAN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_CLEANABLE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_DISABLED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_FINAL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_FLUSH</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_FLUSHABLE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_REMOVABLE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_STARTED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_STDFLAGS</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_OUTPUT_HANDLER_WRITE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_QUERY_RFC1738</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_QUERY_RFC3986</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_SESSION_ACTIVE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_SESSION_DISABLED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_SESSION_NONE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SCANDIR_SORT_ASCENDING</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SCANDIR_SORT_DESCENDING</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SCANDIR_SORT_NONE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SORT_FLAG_CASE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SORT_NATURAL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>STREAM_META_ACCESS</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>STREAM_META_GROUP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>STREAM_META_GROUP_NAME</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>STREAM_META_OWNER</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>STREAM_META_OWNER_NAME</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>STREAM_META_TOUCH</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>T_CALLABLE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>T_INSTEADOF</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>T_TRAIT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>T_TRAIT_C</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ZLIB_ENCODING_DEFLATE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ZLIB_ENCODING_GZIP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ZLIB_ENCODING_RAW</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_CHECK_BIDI</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_CHECK_CONTEXTJ</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_NONTRANSITIONAL_TO_ASCII</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_NONTRANSITIONAL_TO_UNICODE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>INTL_IDNA_VARIANT_2003</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>INTL_IDNA_VARIANT_UTS46</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_EMPTY_LABEL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_LABEL_TOO_LONG</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_DOMAIN_NAME_TOO_LONG</constant>
    </simpara>
   </listitem>
   <listitem>
   <simpara>
     <constant>IDNA_ERROR_LEADING_HYPHEN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_TRAILING_HYPHEN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_HYPHEN_3_4</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_LEADING_COMBINING_MARK</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_DISALLOWED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_PUNYCODE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_LABEL_HAS_DOT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_INVALID_ACE_LABEL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_BIDI</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>IDNA_ERROR_CONTEXTJ</constant>
    </simpara>
   </listitem>
  </itemizedlist>
  
  <simpara><link linkend="book.json">Json</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>JSON_PRETTY_PRINT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_UNESCAPED_SLASHES</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_BIGINT_AS_STRING</constant>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration54.ini">
  <title>Changes to INI file handling</title>
  <simpara>
   The following ini directives have been removed:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <literal>register_globals</literal> and <literal>register_long_arrays</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>allow_call_time_pass_reference</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>define_syslog_variables</literal> and all related functions
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>highlight.bg</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>session.bug_compat_42</literal> and <literal>session.bug_compat_warn</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>y2k_compliance</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>safe_mode</literal> and all related parameters
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>zend.ze1_compatibility_mode</literal>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   The following ini directives have been added:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <literal>cli.pager</literal> and <literal>cli.prompt</literal> for CLI SAPI using readline
     in interactive mode.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>max_input_vars</literal> - specifies how many GET/POST/COOKIE input variables may be
    accepted.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>zend.multibyte</literal> - to control the new multibyte support.
    </simpara>
   </listitem>
   </itemizedlist>
  <simpara>
   The following ini directives have been changed:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <literal>default_charset</literal> now defaults to UTF-8 instead of ISO-8859-1.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>session.entropy_file</literal> now defaults to /dev/random or /dev/urandom depending on
     what has been guessed at compile time.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>session.entropy_length</literal> now defaults to 32.
    </simpara>
   </listitem>
   </itemizedlist>
 </section>

 <section xml:id="migration54.other">
  <title>Other changes</title>
  <itemizedlist>
   <listitem>
    <simpara>
     Added support for storing upload progress feedback in session data.
    </simpara>
    <simpara>
     Changed session.entropy_file to default to /dev/urandom or /dev/arandom if
    either is present at compile time.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>E_ALL</constant> now includes <constant>E_STRICT</constant>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.snmp">SNMP</link> now has an OOP API.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.openssl">OpenSSL</link> now supports AES.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="features.commandline">CLI SAPI</link> doesn't terminate any
     more on fatal errors when using interactive mode with readline support.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Improved parse error messages from parser and warning message of incompatible arguments
     in function calls.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="language.variables.superglobals">$_SERVER['REQUEST_TIME_FLOAT']</link> 
     has been added to include microsecond precision.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     &lt;?= is now always available regardless of the <literal>short_open_tag</literal> setting
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Added class member access on instantiation (e.g. (new foo)-&gt;bar()) support
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Changed silent conversion of array to string to produce a <constant>E_NOTICE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Closures now support scopes and <literal>$this</literal>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>
</appendix>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
